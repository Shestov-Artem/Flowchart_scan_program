### Программа для написания кода по данному изображению блок-схемы этого кода
---
Эта программа, используя библиотеки OpenCv и Tesseract, "читает" блок-схему и пишет по ней код    
___
### Принцип работы программы:      
Для начала найдём все родительские контуры объектов, находящихся на данном изображении      
Для этого нам нужно из исходного изображения сделать бинарное и найти контуры с помощью функции      
findContours(img_neg, contours, hierarchy, RETR_EXTERNAL, CHAIN_APPROX_NONE);     

Теперь будем искать среди контуров те, которые похожи на следующие фигуры
![the image of the player](https://github.com/Shestov-Artem/Flowchart_scan_program/blob/master/Снимок%20экрана%202024-04-17%20002456.png)      

Из каждого контура с помощью функции approxPolyDP(Mat(contours[i]), contours_poly[i], 0.02 * a, true)     
создаем простой контур, в котором все прямые линии заданы лишь двумя точками (contours[i] - исходный массив точек i-го контура, contours_poly[i] - новый)    
Таким образом каждая нужная нам фигура будет нарисована с помощью 4-х точек. Зная координаты (x, y) этих точек, несложно определить, какая перед нами фигура    
Если пронумеровать каждую точку (x1, x2, x3, x4) то:      
+ У прямоугольника ((x1 = x2 && y2 = y2) || (y1 = y2 && x2 = x3))
+ У ромба ((x1 = x3 && y2 = y4) || (y1 = y3 && x2 = x4))
+ Параллепипед - все остальное

В описанном выше методе определения фигур пришлось учитывать некоторую погрешность (у меня 10 пикселей), так как на исходном изображении фигуры могут 
быть нарисованны неровно     

У каждого контура находим крайние точки, как показано на картинке     
![the image of the player](https://github.com/Shestov-Artem/Flowchart_scan_program/blob/master/Снимок%20экрана%202024-04-17%20003325.png)      

Пусть верхняя левая крайняя точка будет начальной точкой, а разность Х-ов и Y-в крайних точек - ширина и высота        

Создаем массив, в котором будут храниться данные об типе фигуры, координатах начальной точки, ширина и высота

Контуры фигур были найдены в случайном порядке, поэтому отсортируем их по возрастанию Y координаты     

Теперь напишем код с помощью цикла:      
Берем первый контур, обрезаем исходное изображения используя его начальную точку, ширину и высоту       
В полученном изображении сканируем текст внутри фигуры, и пишем код, причем в зависимости от типа фигуры он будет соответсвовать некоторому оператору       
Например если тип фигуры ромб, то сначала будет написано "if (", затем текст взятый из изображения, и затем ")" и в конце добавлен оператор else       
Переходим к следующему контуру       

В итоге получим код, соответсвующий данной блок-схеме     

### Пример работы программы:     
Исходное изображение    
![the image of the player](https://github.com/Shestov-Artem/Flowchart_scan_program/blob/master/Снимок%20экрана%202024-04-16%20214559.png)    

Итоговый результат      

![the image of the player](https://github.com/Shestov-Artem/Flowchart_scan_program/blob/master/Снимок%20экрана%202024-04-16%20224528.png)

